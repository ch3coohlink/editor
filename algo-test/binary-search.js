const { floor } = Math
$.bsearch = (a, cmp, l = 0, r = a.length - 1, m, c) => {
  while (l <= r) {
    m = (l + r) >>> 1, c = cmp(a[m], m); if (c > 0
    ) { r = m - 1 } else if (c < 0) { l = m + 1 } else { return m }
  } return -1
}, $.bsleft = (a, c, l = 0, r = a.length, m) => {
  while (l < r) (m = (l + r) >>> 1,
    c(a[m], m) < 0 ? l = m + 1 : r = m); return l
}, $.bsright = (a, c, l = 0, r = a.length, m) => {
  while (l < r) (m = (l + r) >>> 1,
    c(a[m], m) > 0 ? r = m : l = m + 1); return r - 1
}
// $.bsearch = bsright
// $.bsearch = bsleft

{
  const cmp = t => v => v.startsWith(t) ? 0 : v.localeCompare(t)
  const a = ["a", "bc", "aa", "_a", "cdeh", "11", "234"].sort()
  log(a)
  log(bsearch(a, cmp("a"))) // -> 3
  log(bsright(a, cmp("a"), 3)) // -> 4
  log(bsright(a, cmp("aa"), 3)) // -> 4
  log(bsearch(a, cmp("aa"))) // -> 4
  log(bsearch(a, cmp("b"))) // -> 5
}

{
  const a = [1, 3, 7, 8, 11, 23, 58, 79, 101, 211, 333, 456]
  log(a)
  log(bsearch(a, v => v - 1)) // -> 0
  log(bsearch(a, v => v - 23)) // -> 5
  log(bsearch(a, v => v - 211)) // -> 9
  log(bsearch(a, v => v - 555)) // -> -1
  log(bsright(a, v => v - 211, 9)) // -> 9
  log(bsearch(a, v => v + 100)) // -> -1
}

{
  let a = ["$graph/default/edge/07801604/9b9ab820/name", "$graph/default/edge/0e19af89/dedfdc58/name", "$graph/default/edge/13be117e/cc32675d/name", "$graph/default/edge/13be117e/fa15a0f4/name", "$graph/default/edge/14460246/c915d2cd/name", "$graph/default/edge/81075c6b/b16b495e/name", "$graph/default/edge/814859fc/9b9ab820/name", "$graph/default/edge/8dfbcdf1/14460246/name", "$graph/default/edge/8dfbcdf1/b16b495e/name", "$graph/default/edge/93776df5/0e19af89/name", "$graph/default/edge/93776df5/8dfbcdf1/name", "$graph/default/edge/93776df5/93776df5/name", "$graph/default/edge/9b9ab820/8dfbcdf1/name", "$graph/default/edge/9b9ab820/f68a03ff/name", "$graph/default/edge/a708ff1c/13be117e/name", "$graph/default/edge/a708ff1c/81075c6b/name", "$graph/default/edge/a708ff1c/cc32675d/name", "$graph/default/edge/b16b495e/d82f6e17/name", "$graph/default/edge/b16b495e/dd60248a/name", "$graph/default/edge/c915d2cd/81075c6b/name", "$graph/default/edge/cc32675d/13be117e/name", "$graph/default/edge/cc32675d/93776df5/name", "$graph/default/edge/cc32675d/f68a03ff/name", "$graph/default/edge/cc32675d/f82a1a80/name", "$graph/default/edge/d82f6e17/f82a1a80/name", "$graph/default/edge/dd60248a/13be117e/name", "$graph/default/edge/dedfdc58/64d3eb55/name", "$graph/default/edge/dedfdc58/dd60248a/name", "$graph/default/edge/dedfdc58/df0d100d/name", "$graph/default/edge/df0d100d/13be117e/name", "$graph/default/edge/df0d100d/dd60248a/name", "$graph/default/edge/df0d100d/fa15a0f4/name", "$graph/default/edge/f68a03ff/f68a03ff/name", "$graph/default/edge/f82a1a80/8dfbcdf1/name", "$graph/default/edge/f82a1a80/b16b495e/name", "$graph/default/edge/fa15a0f4/c915d2cd/name", "$graph/default/edge/fa15a0f4/df0d100d/name", "$graph/default/edge/fc3d903f/b16b495e/name", "$graph/default/edge/fc3d903f/dedfdc58/name", "$graph/default/edge/fc3d903f/f82a1a80/name", "$graph/default/edge/ff951ecb/814859fc/name", "$graph/default/edge/ff951ecb/d82f6e17/name", "$graph/default/edge/ff951ecb/f82a1a80/name", "$graph/default/from/0e19af89/93776df5", "$graph/default/from/13be117e/a708ff1c", "$graph/default/from/13be117e/cc32675d", "$graph/default/from/13be117e/dd60248a", "$graph/default/from/13be117e/df0d100d", "$graph/default/from/14460246/8dfbcdf1", "$graph/default/from/64d3eb55/dedfdc58", "$graph/default/from/81075c6b/a708ff1c", "$graph/default/from/81075c6b/c915d2cd", "$graph/default/from/814859fc/ff951ecb", "$graph/default/from/8dfbcdf1/93776df5", "$graph/default/from/8dfbcdf1/9b9ab820", "$graph/default/from/8dfbcdf1/f82a1a80", "$graph/default/from/93776df5/93776df5", "$graph/default/from/93776df5/cc32675d", "$graph/default/from/9b9ab820/07801604", "$graph/default/from/9b9ab820/814859fc", "$graph/default/from/b16b495e/81075c6b", "$graph/default/from/b16b495e/8dfbcdf1", "$graph/default/from/b16b495e/f82a1a80", "$graph/default/from/b16b495e/fc3d903f", "$graph/default/from/c915d2cd/14460246", "$graph/default/from/c915d2cd/fa15a0f4", "$graph/default/from/cc32675d/13be117e", "$graph/default/from/cc32675d/a708ff1c", "$graph/default/from/d82f6e17/b16b495e", "$graph/default/from/d82f6e17/ff951ecb", "$graph/default/from/dd60248a/b16b495e", "$graph/default/from/dd60248a/dedfdc58", "$graph/default/from/dd60248a/df0d100d", "$graph/default/from/dedfdc58/0e19af89", "$graph/default/from/dedfdc58/fc3d903f", "$graph/default/from/df0d100d/dedfdc58", "$graph/default/from/df0d100d/fa15a0f4", "$graph/default/from/f68a03ff/9b9ab820", "$graph/default/from/f68a03ff/cc32675d", "$graph/default/from/f68a03ff/f68a03ff", "$graph/default/from/f82a1a80/cc32675d", "$graph/default/from/f82a1a80/d82f6e17", "$graph/default/from/f82a1a80/fc3d903f", "$graph/default/from/f82a1a80/ff951ecb", "$graph/default/from/fa15a0f4/13be117e", "$graph/default/from/fa15a0f4/df0d100d", "$graph/default/id/07801604", "$graph/default/id/0e19af89", "$graph/default/id/13be117e", "$graph/default/id/14460246", "$graph/default/id/64d3eb55", "$graph/default/id/81075c6b", "$graph/default/id/814859fc", "$graph/default/id/8dfbcdf1", "$graph/default/id/93776df5", "$graph/default/id/9b9ab820", "$graph/default/id/a708ff1c", "$graph/default/id/aeab1f59", "$graph/default/id/b16b495e", "$graph/default/id/c915d2cd", "$graph/default/id/cc32675d", "$graph/default/id/d2c0bae2", "$graph/default/id/d82f6e17", "$graph/default/id/dd60248a", "$graph/default/id/dedfdc58", "$graph/default/id/df0d100d", "$graph/default/id/f68a03ff", "$graph/default/id/f82a1a80", "$graph/default/id/fa15a0f4", "$graph/default/id/fc3d903f", "$graph/default/id/ff951ecb", "$graph/default/numberfrom/07801604", "$graph/default/numberfrom/0e19af89", "$graph/default/numberfrom/13be117e", "$graph/default/numberfrom/14460246", "$graph/default/numberfrom/64d3eb55", "$graph/default/numberfrom/81075c6b", "$graph/default/numberfrom/814859fc", "$graph/default/numberfrom/8dfbcdf1", "$graph/default/numberfrom/93776df5", "$graph/default/numberfrom/9b9ab820", "$graph/default/numberfrom/a708ff1c", "$graph/default/numberfrom/aeab1f59", "$graph/default/numberfrom/b16b495e", "$graph/default/numberfrom/c915d2cd", "$graph/default/numberfrom/cc32675d", "$graph/default/numberfrom/d2c0bae2", "$graph/default/numberfrom/d82f6e17", "$graph/default/numberfrom/dd60248a", "$graph/default/numberfrom/dedfdc58", "$graph/default/numberfrom/df0d100d", "$graph/default/numberfrom/f68a03ff", "$graph/default/numberfrom/f82a1a80", "$graph/default/numberfrom/fa15a0f4", "$graph/default/numberfrom/fc3d903f", "$graph/default/numberfrom/ff951ecb", "$graph/default/numberto/07801604", "$graph/default/numberto/0e19af89", "$graph/default/numberto/13be117e", "$graph/default/numberto/14460246", "$graph/default/numberto/64d3eb55", "$graph/default/numberto/81075c6b", "$graph/default/numberto/814859fc", "$graph/default/numberto/8dfbcdf1", "$graph/default/numberto/93776df5", "$graph/default/numberto/9b9ab820", "$graph/default/numberto/a708ff1c", "$graph/default/numberto/aeab1f59", "$graph/default/numberto/b16b495e", "$graph/default/numberto/c915d2cd", "$graph/default/numberto/cc32675d", "$graph/default/numberto/d2c0bae2", "$graph/default/numberto/d82f6e17", "$graph/default/numberto/dd60248a", "$graph/default/numberto/dedfdc58", "$graph/default/numberto/df0d100d", "$graph/default/numberto/f68a03ff", "$graph/default/numberto/f82a1a80", "$graph/default/numberto/fa15a0f4", "$graph/default/numberto/fc3d903f", "$graph/default/numberto/ff951ecb", "$graph/default/prop/07801604/NAME_24", "$graph/default/prop/07801604/__visible__", "$graph/default/prop/0e19af89/NAME_14", "$graph/default/prop/0e19af89/__visible__", "$graph/default/prop/13be117e/NAME_2", "$graph/default/prop/13be117e/NAME_4", "$graph/default/prop/13be117e/__visible__", "$graph/default/prop/14460246/NAME_12", "$graph/default/prop/14460246/__visible__", "$graph/default/prop/64d3eb55/__visible__", "$graph/default/prop/81075c6b/NAME_19", "$graph/default/prop/81075c6b/__visible__", "$graph/default/prop/814859fc/NAME_24", "$graph/default/prop/814859fc/__visible__", "$graph/default/prop/8dfbcdf1/NAME_13", "$graph/default/prop/8dfbcdf1/NAME_19", "$graph/default/prop/8dfbcdf1/__visible__", "$graph/default/prop/93776df5/NAME_20", "$graph/default/prop/93776df5/NAME_21", "$graph/default/prop/93776df5/NAME_22", "$graph/default/prop/93776df5/__visible__", "$graph/default/prop/9b9ab820/NAME_21", "$graph/default/prop/9b9ab820/NAME_5", "$graph/default/prop/9b9ab820/__visible__", "$graph/default/prop/a708ff1c/NAME_16", "$graph/default/prop/a708ff1c/NAME_17", "$graph/default/prop/a708ff1c/NAME_2", "$graph/default/prop/a708ff1c/__visible__", "$graph/default/prop/aeab1f59/__visible__", "$graph/default/prop/b16b495e/NAME_15", "$graph/default/prop/b16b495e/NAME_7", "$graph/default/prop/b16b495e/__visible__", "$graph/default/prop/c915d2cd/NAME_16", "$graph/default/prop/c915d2cd/__visible__", "$graph/default/prop/cc32675d/NAME_17", "$graph/default/prop/cc32675d/NAME_22", "$graph/default/prop/cc32675d/NAME_23", "$graph/default/prop/cc32675d/NAME_5", "$graph/default/prop/cc32675d/__visible__", "$graph/default/prop/d2c0bae2/__visible__", "$graph/default/prop/d82f6e17/NAME_23", "$graph/default/prop/d82f6e17/__visible__", "$graph/default/prop/dd60248a/NAME_17", "$graph/default/prop/dd60248a/__visible__", "$graph/default/prop/dedfdc58/NAME_0", "$graph/default/prop/dedfdc58/NAME_11", "$graph/default/prop/dedfdc58/NAME_7", "$graph/default/prop/dedfdc58/__visible__", "$graph/default/prop/df0d100d/NAME_17", "$graph/default/prop/df0d100d/NAME_4", "$graph/default/prop/df0d100d/NAME_7", "$graph/default/prop/df0d100d/__visible__", "$graph/default/prop/f68a03ff/NAME_5", "$graph/default/prop/f68a03ff/__visible__", "$graph/default/prop/f82a1a80/NAME_19", "$graph/default/prop/f82a1a80/NAME_21", "$graph/default/prop/f82a1a80/__visible__", "$graph/default/prop/fa15a0f4/NAME_0", "$graph/default/prop/fa15a0f4/NAME_12", "$graph/default/prop/fa15a0f4/__visible__", "$graph/default/prop/fc3d903f/NAME_14", "$graph/default/prop/fc3d903f/NAME_19", "$graph/default/prop/fc3d903f/NAME_23", "$graph/default/prop/fc3d903f/__visible__", "$graph/default/prop/ff951ecb/NAME_15", "$graph/default/prop/ff951ecb/NAME_23", "$graph/default/prop/ff951ecb/NAME_3", "$graph/default/prop/ff951ecb/__visible__", "$graph/default/revprop/NAME_0/dedfdc58", "$graph/default/revprop/NAME_0/fa15a0f4", "$graph/default/revprop/NAME_11/dedfdc58", "$graph/default/revprop/NAME_12/14460246", "$graph/default/revprop/NAME_12/fa15a0f4", "$graph/default/revprop/NAME_13/8dfbcdf1", "$graph/default/revprop/NAME_14/0e19af89", "$graph/default/revprop/NAME_14/fc3d903f", "$graph/default/revprop/NAME_15/b16b495e", "$graph/default/revprop/NAME_15/ff951ecb", "$graph/default/revprop/NAME_16/a708ff1c", "$graph/default/revprop/NAME_16/c915d2cd", "$graph/default/revprop/NAME_17/a708ff1c", "$graph/default/revprop/NAME_17/cc32675d", "$graph/default/revprop/NAME_17/dd60248a", "$graph/default/revprop/NAME_17/df0d100d", "$graph/default/revprop/NAME_19/81075c6b", "$graph/default/revprop/NAME_19/8dfbcdf1", "$graph/default/revprop/NAME_19/f82a1a80", "$graph/default/revprop/NAME_19/fc3d903f", "$graph/default/revprop/NAME_2/13be117e", "$graph/default/revprop/NAME_2/a708ff1c", "$graph/default/revprop/NAME_20/93776df5", "$graph/default/revprop/NAME_21/93776df5", "$graph/default/revprop/NAME_21/9b9ab820", "$graph/default/revprop/NAME_21/f82a1a80", "$graph/default/revprop/NAME_22/93776df5", "$graph/default/revprop/NAME_22/cc32675d", "$graph/default/revprop/NAME_23/cc32675d", "$graph/default/revprop/NAME_23/d82f6e17", "$graph/default/revprop/NAME_23/fc3d903f", "$graph/default/revprop/NAME_23/ff951ecb", "$graph/default/revprop/NAME_24/07801604", "$graph/default/revprop/NAME_24/814859fc", "$graph/default/revprop/NAME_3/ff951ecb", "$graph/default/revprop/NAME_4/13be117e", "$graph/default/revprop/NAME_4/df0d100d", "$graph/default/revprop/NAME_5/9b9ab820", "$graph/default/revprop/NAME_5/cc32675d", "$graph/default/revprop/NAME_5/f68a03ff", "$graph/default/revprop/NAME_7/b16b495e", "$graph/default/revprop/NAME_7/dedfdc58", "$graph/default/revprop/NAME_7/df0d100d", "$graph/default/revprop/__visible__/07801604", "$graph/default/revprop/__visible__/0e19af89", "$graph/default/revprop/__visible__/13be117e", "$graph/default/revprop/__visible__/14460246", "$graph/default/revprop/__visible__/64d3eb55", "$graph/default/revprop/__visible__/81075c6b", "$graph/default/revprop/__visible__/814859fc", "$graph/default/revprop/__visible__/8dfbcdf1", "$graph/default/revprop/__visible__/93776df5", "$graph/default/revprop/__visible__/9b9ab820", "$graph/default/revprop/__visible__/a708ff1c", "$graph/default/revprop/__visible__/aeab1f59", "$graph/default/revprop/__visible__/b16b495e", "$graph/default/revprop/__visible__/c915d2cd", "$graph/default/revprop/__visible__/cc32675d", "$graph/default/revprop/__visible__/d2c0bae2", "$graph/default/revprop/__visible__/d82f6e17", "$graph/default/revprop/__visible__/dd60248a", "$graph/default/revprop/__visible__/dedfdc58", "$graph/default/revprop/__visible__/df0d100d", "$graph/default/revprop/__visible__/f68a03ff", "$graph/default/revprop/__visible__/f82a1a80", "$graph/default/revprop/__visible__/fa15a0f4", "$graph/default/revprop/__visible__/fc3d903f", "$graph/default/revprop/__visible__/ff951ecb", "$graph/default/to/07801604/9b9ab820", "$graph/default/to/0e19af89/dedfdc58", "$graph/default/to/13be117e/cc32675d", "$graph/default/to/13be117e/fa15a0f4", "$graph/default/to/14460246/c915d2cd", "$graph/default/to/81075c6b/b16b495e", "$graph/default/to/814859fc/9b9ab820", "$graph/default/to/8dfbcdf1/14460246", "$graph/default/to/8dfbcdf1/b16b495e", "$graph/default/to/93776df5/0e19af89", "$graph/default/to/93776df5/8dfbcdf1", "$graph/default/to/93776df5/93776df5", "$graph/default/to/9b9ab820/8dfbcdf1", "$graph/default/to/9b9ab820/f68a03ff", "$graph/default/to/a708ff1c/13be117e", "$graph/default/to/a708ff1c/81075c6b", "$graph/default/to/a708ff1c/cc32675d", "$graph/default/to/b16b495e/d82f6e17", "$graph/default/to/b16b495e/dd60248a", "$graph/default/to/c915d2cd/81075c6b", "$graph/default/to/cc32675d/13be117e", "$graph/default/to/cc32675d/93776df5", "$graph/default/to/cc32675d/f68a03ff", "$graph/default/to/cc32675d/f82a1a80", "$graph/default/to/d82f6e17/f82a1a80", "$graph/default/to/dd60248a/13be117e", "$graph/default/to/dedfdc58/64d3eb55", "$graph/default/to/dedfdc58/dd60248a", "$graph/default/to/dedfdc58/df0d100d", "$graph/default/to/df0d100d/13be117e", "$graph/default/to/df0d100d/dd60248a", "$graph/default/to/df0d100d/fa15a0f4", "$graph/default/to/f68a03ff/f68a03ff", "$graph/default/to/f82a1a80/8dfbcdf1", "$graph/default/to/f82a1a80/b16b495e", "$graph/default/to/fa15a0f4/c915d2cd", "$graph/default/to/fa15a0f4/df0d100d", "$graph/default/to/fc3d903f/b16b495e", "$graph/default/to/fc3d903f/dedfdc58", "$graph/default/to/fc3d903f/f82a1a80", "$graph/default/to/ff951ecb/814859fc", "$graph/default/to/ff951ecb/d82f6e17", "$graph/default/to/ff951ecb/f82a1a80"]

  const cmp = t => (v, i) => {
    log(i, v, v.startsWith(t))
    return v.startsWith(t) ? 0 : v.localeCompare(t)
  }
  const st = (a, b) => a.localeCompare(b)
  let oa = [...a]; a = a.sort(st)
  // log(a.join('\n'))
  for (let i = 1; i < a.length; i++) {
    log(st(a[i], a[i - 1]))
  }
  let i, t = '$graph/default/revprop/__visible__'
  i = bsearch(a, cmp(t)); log(i)
  i = bsleft(a, cmp(t)); log(i)
  i = bsright(a, cmp(t)); log(i)
  {
    for (let i = 0; i < a.length; i++) {
      const v = a[i]
      if (v.startsWith(t)) { log(i); break }
    }
    for (let i = a.length - 1; i > -1; i--) {
      const v = a[i]
      if (v.startsWith(t)) { log(i); break }
    }
  }
}