{"id":"8400143920898838d6208cd70653b64dddb4bc1b87b15821918a5411eee036a6","to":[],"value":"// 这个文件用于调查monaco editor的内存泄露\r\n\r\nconst dom = (t = 'div') => document.createElement(t)\r\nconst newme = () => {\r\n  const top = dom()\r\n  const sroot = top.attachShadow({ mode: \"open\" })\r\n  const css = dom(\"style\")\r\n  css.innerText = `@import \"${$$.monaco_root}/editor/editor.main.css\";`\r\n  const div = dom()\r\n  div.className = 'monaco-editor-div'\r\n  top.style.height = '100px'\r\n  div.style.height = '100%'\r\n  sroot.append(div, css)\r\n  root.append(top)\r\n\r\n  const e = monaco.editor.create(div, {\r\n    value: \"console.log('hello')\",\r\n    language: \"javascript\",\r\n    theme: \"vs-light\",\r\n    renderWhitespace: \"all\",\r\n    renderControlCharacters: true,\r\n    lightbulb: { enabled: false },\r\n    tabSize: 2,\r\n    cursorBlinking: \"smooth\",\r\n    cursorSmoothCaretAnimation: \"on\",\r\n    smoothScrolling: true,\r\n    wordBasedSuggestions: 'off',\r\n  })\r\n  setTimeout(() => {\r\n    top.remove()\r\n    top.innerHTML = ''\r\n    e.dispose()\r\n  }, 1000)\r\n  $$.ongc(top, 'test-top')\r\n  $$.ongc(e, 'monaco-editor')\r\n}\r\n// newme()\r\nsetInterval(newme, 50)"}